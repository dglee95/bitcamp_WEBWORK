<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Gugi&family=Lobster&family=Rubik+Beastly&family=Single+Day&display=swap"
        rel="stylesheet">

        <style>
            div.login{
                margin: 20% 40%;
                border: 5px solid gray;
                width: 310px;
                height: 217px;
                border-radius: 10px;
            }
        </style>
        <script>
            window.onload=function(){
                init_check();

                //로그인 버튼 이벤트
                document.getElementById("btnlogin").onclick=function(){
                    //아이디저장의 체크값 알아내기(true/false)
                    var chksave=document.getElementById("chksave").checked;//value로 주면 항상 on으로 나와서 checked로 봄
                    console.log(chksave);
                    var myid=document.getElementById("myid").value;
                    var mypass=document.getElementById("mypass").value;

                    if(mypass=='1234'){//javascript는 문자열도 equals 안씀
                        //로칼 스토리지에 체크값과 아이디를 저장해둔다
                        localStorage.chksave=chksave;
                        localStorage.myid=myid;
                        //메인페이지로 이동을 한다
                        location.href="ex3_storage.html";
                    } else {
                        alert("비번이 맞지 않습니다");
                    }
                }

            }//onload

            function init_check(){
                //로칼 스토리지로부터 체크값과 아이디를 얻는다
                var chksave=localStorage.chksave;
                var myid=localStorage.myid;

                if(chksave=='true'){//boolean이면 따옴표 없는데 이건 문자열
                    //아이디저장이 체크상태라면 체크속성주고 아이디도 출력
                    document.getElementById("myid").value=myid;
                    document.getElementById("chksave").setAttribute("checked",true);
                }else{
                    //체크상태가 아니라면 아이디도 지우고 체크속성 제거
                    document.getElementById("myid").value="";
                    document.getElementById("chksave").removeAttribute("checked");//setAttribute로 하면 안됨
                }

            }
        </script>
</head>
<body>
    <div class="login">
        <table class="table table-bordered" style="width:300px;">
            <tr>
                <td colspan="2" align="center">
                    <label><input type="checkbox" id="chksave"> 아이디 저장</label>
                </td>
            </tr>
            <tr>
                <th style="width:100px;" class="table table-info">아이디</th>
                <td>
                    <input type="text" id="myid" class="form-control"
                    placeholder="아이디" autofocus>
                </td>
            </tr>
            <th style="width:100px;" class="table table-info">비밀번호</th>
            <td>
                <input type="password" id="mypass" class="form-control"
                placeholder="비밀번호">
            </td>
        </tr>
        <tr>
            <td colspan="2" class="table-danger" align="center">
                <button type="button" id="btnlogin" class="btn btn-outline-info"
                style="width:150px;">회원 로그인</button>
            </td>
        </tr>
        </table>
    </div>
</body>
</html>